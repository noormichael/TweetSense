<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        {% if q2 %}
        <title>{{ q }} VS {{ q2 }}</title>
        {% else %}
        <title>{{ q }}</title>
        {% endif %}
        

        <link href="{{ url_for('static', filename='css/normalize.min.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">

        <script src="{{url_for('static', filename='js/vendor/modernizr-2.6.2-respond-1.1.0.min.js')}}"></script>
         <!-- Import Google Line Chart -->
   <script type="text/javascript"
          src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['corechart']
            }]
          }"></script>
 

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        <style>
        .heading{color:#C58917;}
        .ultimate-wrapper{background-color:#FDD017;}
        .bluecolor{background-color:#C1CFE8;}
        .darkblue{background-color:#1C68EB}
        .blurcolor{color:#588DE8; line-height: 1.5;}
        .lowertab{border:0; line-height: 1.5;}
        .upperborder{margin: 15px;
                      padding: 25px;
                      color: #C58917;
                        }
        .boldlygo{
            font-weight: bold;
        }
        p.boldlygo{
            font-size:30px;
            padding-bottom: 0;
        }
        li.boldlygo{
            padding-top: 0;
            padding-bottom: 0;
        }                
        /*.first-article{background-color:#966F33}*/
        @media screen and (max-width: 900px) {
                h1 {
                    line-height: 35px;
                }
            }
        @media screen and (max-width: 600px) {
                h1 {
                    font-size: 25px;
                }
            }    
        @media screen and (max-width: 700px) {
                title {
                    padding-left: 35px;
                }
            }
        @media screen and (max-width: 500px) {
                li,a {
                    padding: none;
                    border: none;
                    margin: none;
                }
            }                            
        </style>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

       <!--___________________NavBar Menu_____________________ -->
        <div class="header-container bluecolor lowertab">
            <header class="wrapper clearfix">
                <h1 class="title blurcolor">TweetSense140</h1>
                <nav class="bluecolor">
                    <ul>
                        <li><a href="/" class="bluecolor">Home</a></li>
                        <li><a href="/random" class="bluecolor">Random Graph</a></li>
                        <li><a href="/about" class="bluecolor">About us</a></li>
                        <li><a href="/hof" class="bluecolor">Hall of Fame</a></li>
                    </ul>
                </nav>
            </header>
        </div>



        <!-- ______________Options___________________ -->
    <div class="ultimate-wrapper"> 
      <CENTER>
              {% if data2 %}
              <script>
                second = true;
                var companydata2 = [{{ data2 }}];
              </script>
              <div class="heading upperborder" style="text-align: center"><h1>{{ q }} VS {{ q2 }}</h1></div>
              <div class="chart" id="output_chart2" style="align: center; width: 900px; height: 500px"></div>   
              {% else %}
              <div class="heading upperborder" style="text-align: center"><h1>{{ q }}</h1></div>
              <div class="chart" id='output_chart' style="align: center; width: 900px; height: 500px"></div> 
              {% endif %}
      </CENTER>
 


    <div class="main-container" name="section1">
        <div class="main wrapper clearfix">

            <h1>Get a sense of anything tweeted in the last 7 days:</h1>
                <form action="" method="post" name="login">
                    {{ form.hidden_tag() }} 
               <div style="display:none;"><input id="csrf_token" name="csrf_token" type="hidden" value="1421521855##a1af18a55da3a2f50514a97306473557ba90b703"></div>         
                    <!-- <p> -->
                        <!-- Please enter your search query:<br> -->
                    <h4>Enter term to analyze: (e.g #MHacks)</h4> 
                    {{ form.query(size=50) }}
                    <p>(Optional) Enter second term to compare against.</p>
                    {{ form.opQuery(size=50 )}}
                    <!-- </p> -->
                    <p>
                        <!-- <input id="query" name="query" size="80" type="text" value=""> -->
                        <input type="submit" value="Submit" class="btn hover">
                    </p>
               
            </div> <!-- #main -->
        </div> <!-- #main-container -->

         <div class="footer-container bluecolor"> 
            <footer class="wrapper">
                <h3><a href="https://www.facebook.com/tweetsense">Facebook Link</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/pmauldin/Waffles-at-one">GitHub Repo</a></h3>
            </footer>
        </div>
</div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.1.min.js"><\/script>')</script>

        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>

                  <script type="text/javascript">
    // $.get(URL,data,function(data,status,xhr),dataType)
    //$.get("http://feeling-tweety.herokuapp.com/",data,function(data,status,xhr),json)
  // Getting the company name, the day and the rating for that day
  //Also getting number of tweets that data was based on
  var companydata={{ data }};
  
  // var second = false;
  // var second = !(data2 == null)
  // document.write(companyda;ta);
    // Format= ["Company Name","Date",Sentiment Rating, #of Tweets];
    //Assuming that I am getting an array of company data with the index differing with different day Data, but the company name is the same every time
 </script>
 {% if data2 %}
 <script>
 var companydata2={{ data2 }};
 </script>
 {% endif %}
</head>
    <script type="text/javascript">
      google.setOnLoadCallback(drawChart);
       var subdata =[];
    var timedata =[];
    var ratingdata =[];
    // var amountoftweets =[];
    
    for(i=0;i<=companydata.length-1;i++){
      subdata=companydata[i]; //subdata now takes the form of one element from the array companydata
      timedata.push(subdata[0]); //Inserts first element from companydata[i], which would be the time index
      ratingdata.push(subdata[1]); //Inserts second element from companydata[i], which would be the twitter sentiment rating
      // amountoftweets.push(subdata[2]); //Inserts third element from companydata, which would be the amount of tweets
    }
      function drawChart() {
        var startArray = [['Time', '{{ q }}']];
        for(i=0;i<companydata.length;i++) {
            startArray.push([timedata[i], ratingdata[i]]);
        }
  var data = google.visualization.arrayToDataTable(startArray);
     /* function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Time', 'Rating', '# of tweets'],
          ['January 12',  -22, 20],
          ['January 13',  -12, 30],
          ['January 14',  4, 40],
          ['January 15',  -5, 50],
          ['January 16',  31, 60],
          ['January 17',  56, 60],
          ['January 18',  40, 40]
        ]);   */ 
        var options = {
          hAxis: {title: 'Time (in days)'},
          vAxis: {title: 'Good                     Bad'},
          curveType: 'function',
          legend: { position: 'bottom' }
        };
        var chart = new google.visualization.LineChart(document.getElementById('output_chart'));
        chart.draw(data, options);
      }
    </script>

    <script type="text/javascript">
      google.setOnLoadCallback(drawChart);
       var subdata2 =[];
       var subdata3 =[];
    var timedata2 =[];
    var ratingdata2 =[];
    var ratingdata3 =[];
    
    for(i=0;i<=companydata.length-1;i++){
      subdata2=companydata[i];
      subdata3=companydata2[i]; //subdata now takes the form of one element from the array companydata
      timedata2.push(subdata2[0]); //Inserts first element from companydata[i], which would be the time index
      ratingdata2.push(subdata2[1]);
      ratingdata3.push(subdata3[1]); 
    }
      function drawChart() {
        arr = [['Time', '{{ q }}', '{{ q2 }}']];
        // data.push([timedata2[0], ratingdata2[0], ratingdata3[0]]);
        for(i=0;i<timedata2.length-1;i++) {
          arr.push([timedata2[i], ratingdata2[i], ratingdata3[i]]);
        }
        var data = google.visualization.arrayToDataTable(arr);
        var options2 = {
          hAxis: {title: 'Time (in days)'},
          vAxis: {title: 'Emotional Connotation'},
          curveType: 'function',
          legend: { position: 'bottom' }
        };
        var chart2 = new google.visualization.LineChart(document.getElementById('output_chart2'));
        chart2.draw(data, options2);
      }
    </script>

<!-- Google Analytics code -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-58718413-1', 'auto');
    ga('send', 'pageview');

  </script>
    </body>
</html>